(function($) {	var sticky_note = function() {		var $notedrag = null,		startdrag = function(e) {			e.preventDefault();			$notedrag = $(this).closest('.sticky_note');			coords = $notedrag.offset();			el_x = e.pageX-coords.left;			el_y = e.pageY-coords.top;			el_w = $notedrag.outerWidth();			el_h = $notedrag.outerHeight();			$('body').on("mousemove", function(e) {				if ($notedrag) {					//Evitiamo di poterle spostare fuori...					my_y=e.pageY-el_y;					my_x=e.pageX-el_x;					if (my_y+el_h>$(window).height())						my_y=$(window).height()-el_h;					if (my_x+el_w>$(window).width())						my_x=$(window).width()-el_w;					if (my_y<0)my_y=0;					if (my_x<0)my_x=0;					$notedrag.offset({						top: my_y,						left: my_x					});				}			});					},		stopdrag = function(e) {			e.preventDefault();			$notedrag = null;		}					return {			init : function(opt) {				var my_note = $('<div></div>').addClass('sticky_note')					.append($('<div></div>').addClass('mover').on('mousedown',startdrag))					.append($('<textarea></textarea>').addClass('text'));				$('body').append(my_note);				$('body').on("mouseup", stopdrag);				return my_note;			}		}		}();	$.fn.extend({		niiStickyNote : sticky_note.init	});})(jQuery);$(function() {	$().niiStickyNote();});